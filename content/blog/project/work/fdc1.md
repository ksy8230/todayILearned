---
title: 프론트 디자인 컨벤션
date: 2022-01-05
output:
  html_document:
    css: "./assets/css/style.css"
---

리액트 기반의 프로젝트에 사용할 수 있는 UI 모음 모듈을 만들며 자잘한 내용들을 적어보려고 한다.  
투두 리스트는 일정과 역량(?)에 따라 유동적으로 가져갈 생각이다.

### 22-01-04 - 현재까지 진행된 사항

- 간단한 컴포넌트 몇 개를 개발해 사설 npm에 배포
- 사설 npm에서 내려 받은 **front design system** 모듈(줄여서 **fds**라 지칭)을 리액트 기반의 데모 프로젝트에 설치하여 사용 가능 확인
- fds모듈에 사용 중인 색상코드파일, 폰트, 아이콘 중 색상코드 파일만 fds모듈 내부에 포함

### 22-01-06 - 현재까지 진행된 사항

- 폰트 경량화하여 독립 모듈로 배포
- 팀 프로젝트의 폰트 파일들 전부 제거 후 폰트 모듈 사용
- 사용 중인 폰트가 16픽셀 이하에서 깨지는 현상이 발생했는데 본문용 폰트를 고르고 추가할 시간이 부족해 일단은 16픽셀 이하의 텍스트는 시스템 기본 폰트 사용
- 팀 프로젝트에 사용 중인 오픈소스 디자인 라이브러리를 걷어내기 시작. 해당 라이브러리에서 사용하는 컴포넌트를 검색해보니 버튼과 인풋 정도만 사용 중이었다... 제대로 활용도 못한 무거운 라이브러리는 빨리 걷어내자!

### 22-01-15 - 현재까지 진행된 사항

fds 모듈을 기존 프로젝트에 이식시키는 과정에서 리액트 버전 에러가 났다.   
fds 모듈은 CRA로 만들어졌기 때문에 react.js 라이브러리가 디펜던시에 존재한다. 그래서 나는 기존 프로젝트의 react.js를 삭제해버렸다. 이후 node_modules를 전부 날리고 새로 npm install 로 다시 package.json을 설치하니, 리액트 훅 에러와 린트 에러가 뜨면서 웹화면이 열리지 않았다. 😳 기존프로젝트가 리액트 파일을 찾지 못하게 되었다.

원인 규명   

기존 프로젝트의 리액트 버전과 fds 모듈의 리액트 메이저 버전이 달라서 생긴 문제였다.

해결 방안 

기존 프로젝트에 원래 사용 중이던 버전의 리액트를 설치 해 주니 정상 동작했다.   
기존 프로젝트는 해당 버전의 리액트에 의존하여 개발된 많은 기타 라이브러리들이 존재하기 때문에 프로젝트를 다시 걷어내는 수준에서 새로 시작할 생각이 아니라면 기존에 설치되어있는 라이브러리들은 유지하는 게 좋겠다.

의문점

fds 모듈을 npm에 배포할 때 리액트가 없다면 설치해 주고 있다면 건너뛰는 방식으로 설치할 수는 없을까?   
방법은 있었다.

    1. fds 모듈에서 리액트를 peerdependency에 넣어주고 배포해보기
    2. fds모듈의 index 파일 경로에 npm init 으로 package.json 만들어서 해당 모듈에 꼭 필요한 파일들만 다시 배포해 보기

package.json에서 디펜던시에 있는 녀석들은 해당 모듈을 사용하기 위해서는 꼭 필요한 아이들이라 명시해주는 곳이라 node_modules폴더에 설치가 된다. fds모듈의 리액트는 디펜던시에 있다. 그래서 CRA를 이용해 만든 프로젝트에서 리액트 모듈들을 제거해주고 fds만 설치해도 작동했던 것이 그 이유다.    

devdependecy는 개발상에서 필요한 녀석들만 명시해주는 곳이다. 때문에 배포할 때 개발 도구로만 사용했던 라이브러리들은 이곳에 넣어줘야 모듈 배포 때 불필요한 파일을 설치하지 않을 수 있다.

peerdependecy는 반대로 생각해야 한다. fds모듈 package.json의 피어디펜던시에 리액트를 넣는다는 것은, 리액트의 입장에서 fds 모듈이 부속품이라는 의미가 된다. 즉, fds는 리액트 라이브러리 하에서 구동하는 라이브러리라고 명시해주는 것이다. 


---

### 해야할 사항
- [ ] fds를 앞으로 어떻게 가져갈지 도식화하기
- [x] 폰트 경량화 작업
- [x] 폰트 모듈 생성 후 배포
- [ ] 아이콘 모듈 생성 후 배포
- [x] 작업용 프로젝트에 fds 모듈 추가



### 폰트 경량화 작업

fds 모듈은 private npm 서버에 올려서 사용하고 있다.  
원래는 디자인 컴포넌트에 사용된 폰트들도 함께 묶어서 올리려고 했는데 413 Request Entity Too Large 에러가 떠서 용량에 대한 문제를 고려하게 되었다.  
"무거운 폰트 모듈은 독립적으로 만들고 경량화 작업을 해보자"  
(물론 서버측에서 요청 받는 바디의 용량 limit 설정은 진행해야했다. 설정하지 않으면 기본적으론 1mb만 주고 받도록 되어 있다.)

- ttf -> woff
- data-urI 변환하여 배포

* data- urI 관련하여 정리 포스팅 필요

### front design system 모듈 보완

fds 모듈은 material-ui를 기반으로 제작되었다.  
하지만 "팀 내부 디자인 시스템이 특정 라이브러리에 종속되는 게 맞을까?" 하여, 사용 중이던 디자인 라이브러리를 삭제 결정. 컴포넌트들은 그 자체의 기능에 집중하도록 하고 스타일 작업은 최소한으로 줄이는 방향으로 바꿨다.

- 
