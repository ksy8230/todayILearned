{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/docker/docker3/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Today I Learned"}},"markdownRemark":{"id":"c70e72a4-a4a6-51a6-b6a2-1f86e0702c43","excerpt":"…","html":"<p>도커 허브에서 내려 받은 이미지를 다운 받아 컨테이너로 만들어 런을 시켜보고 나니 나도 도커 허브에 내 이미지를 올려보고 싶다는 생각이 들었다.</p>\n<h3>도커 이미지 만드는 법 두 가지</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/7bf67/docker16.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.24050632911393%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAQCAwUG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB6O3GQ66QUeOCwH//xAAbEAACAwEBAQAAAAAAAAAAAAACAwABBDISE//aAAgBAQABBQIs42alCu56Z9F7Ru60qKFzE8//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAgEAABAgUFAAAAAAAAAAAAAAABAAIQERIicQMhUZKh/9oACAEBAAY/Aian9kZFxyYGenbzUrxT6tnIwOV//8QAHBABAAICAwEAAAAAAAAAAAAAAQARITEQgaHx/9oACAEBAAE/IU4Vt4UUlHG/iuhM/lHFZ2IwRdnTPBEIZP/aAAwDAQACAAMAAAAQMA98/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHxABAAIBBAMBAAAAAAAAAAAAAREhAEFRkaEQYYGx/9oACAEBAAE/EE3TIES6Bht4ohCdnwQosCBYCmmsFaTgDEZDJ2gO8awww1Xxnf8A5lSjjAIA+PRn/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"도커\"\n        title=\"도커\"\n        src=\"/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/828fb/docker16.jpg\"\n        srcset=\"/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/ff44c/docker16.jpg 158w,\n/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/a6688/docker16.jpg 315w,\n/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/828fb/docker16.jpg 630w,\n/todayILearned/static/7cffaf691a2ba9187006a35b62e576eb/7bf67/docker16.jpg 680w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>\n<p>컨테이너에서 커밋하여 이미지 만들기</p>\n<ul>\n<li>내 컨테이너의 진행 상황을 커밋하여 이미지를 만드는 방법은 <strong>백업</strong>의 개념과 가깝다.</li>\n</ul>\n</li>\n<li>\n<p><strong>도커 파일</strong>을 만들어 <strong>빌드</strong>하여 이미지 만들기</p>\n<ul>\n<li>도커 파일로 만드는 이미지는 구체적으로 시간 순서에 따라 이미지를 <strong>생성</strong>하는 개념에 가깝다.</li>\n</ul>\n</li>\n</ol>\n<h3>웹 서버 이미지를 도커 파일로 만들기</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/b040c/docker17.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAcqRAP/EABYQAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAQABBQJW1tb/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwGI/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAADH/2gAIAQEABj8CVX//xAAYEAADAQEAAAAAAAAAAAAAAAAAYZEBUf/aAAgBAQABPyHq0co5T//aAAwDAQACAAMAAAAQ/D//xAAWEQEBAQAAAAAAAAAAAAAAAAAAEVH/2gAIAQMBAT8QhGP/xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QrKz/xAAZEAEBAAMBAAAAAAAAAAAAAAABAEFh0fH/2gAIAQEAAT8QUuLbL9F6q//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"도커\"\n        title=\"도커\"\n        src=\"/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/828fb/docker17.jpg\"\n        srcset=\"/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/ff44c/docker17.jpg 158w,\n/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/a6688/docker17.jpg 315w,\n/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/828fb/docker17.jpg 630w,\n/todayILearned/static/aa3350c742a5bbc423e69fab16ea2071/b040c/docker17.jpg 844w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>\n<p>도커 파일 작성</p>\n<ul>\n<li>\n<p>Dockerfile이라는 약속된 도커 파일을 생성 후 컨테이너 생성 환경을 파일에 적어준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">FROM</span> unbuntu<span class=\"token operator\">:</span><span class=\"token number\">20.04</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>도커 파일 빌드</p>\n<ul>\n<li>\n<p>생성된 도커에 태그명으로 web-server-build를 명명했고, 도커 파일이 있는 디렉토리에서 앞으로의 작업을 할 예정이므로 현재 디렉토리 . 를 가리킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  > docker build -t web-server-build .</code></pre></div>\n</li>\n<li>\n<p>도커 web-server-build 이미지 생성 확인</p>\n<ul>\n<li>\n<p>아래 명령어를 실행하면 만들어진 이미지 목록 조회가 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  > docker images</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 528px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/c64a7/docker18.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.18987341772152%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABxwQH/8QAFhAAAwAAAAAAAAAAAAAAAAAAARAy/9oACAEBAAEFAjS//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAY/AhT/xAAXEAADAQAAAAAAAAAAAAAAAAAAEDHB/9oACAEBAAE/IaGF/9oADAMBAAIAAwAAABB0D//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAABBQADAAAAAAAAAAAAAAABABEhQWExcaH/2gAIAQEAAT8Qn2FOw0zxcAQLrSv/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"도커\"\n        title=\"도커\"\n        src=\"/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/c64a7/docker18.jpg\"\n        srcset=\"/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/ff44c/docker18.jpg 158w,\n/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/a6688/docker18.jpg 315w,\n/todayILearned/static/c30dd07b76c96d5bf696c1c6bacb38ea/c64a7/docker18.jpg 528w\"\n        sizes=\"(max-width: 528px) 100vw, 528px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>도커 파일 작성 완료</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">FROM</span> ubuntu<span class=\"token operator\">:</span><span class=\"token number\">20.04</span>\r\n<span class=\"token constant\">RUN</span> apt update <span class=\"token operator\">&amp;&amp;</span> apt install <span class=\"token operator\">-</span>y python3\r\n<span class=\"token constant\">WORKDIR</span> <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>www<span class=\"token operator\">/</span>html\r\n<span class=\"token constant\">COPY</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token constant\">CMD</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"python3\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-u\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-m\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"http.server\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>우분투 20.04 환경을 세팅한다</li>\n<li>apt update 하고 python3를 설치한다 (*run 명령어는 빌드 시점에 실행)</li>\n<li>작업 디렉토리를 생성한다 (없다면 만들어서 생성한다)</li>\n<li>호스트에 있는 index.html 파일을 workdir 디렉토리에 복사한다</li>\n<li>cmd 명령어로 파이썬 웹서버를 실행한다 (*cmd 명령어는 컨테이너 시점에 실행)</li>\n</ul>\n</li>\n<li>\n<p>도커 파일 빌드 후 만든 이미지 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  > docker build -t web-server-build .;\r\n  > docker rm --force web-server;\r\n  > docker run -p 8888:8000 --name web-server web-server-build</code></pre></div>\n<ul>\n<li>도커 파일을 해당 디렉토리에서 web-server 태그를 붙여 빌드한다</li>\n<li>web-server 태그가 있다면 삭제하고 새로 생성한다</li>\n<li>web-server-build 이미지를 바탕으로 web-server 컨테이너를 생성해 호스트 8888 포트를 컨테이너 8000 포트와 연결해 실행</li>\n</ul>\n</li>\n</ol>\n<p>위 방법을 이용하면 create-react-app 을 이용해 리액트 빌드 파일을 도커 컨테이너에서 실행한 파이썬 서버에 올려볼 수도 있겠다. 꼭 해보자.</p>\n<h3>출처</h3>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=0kQC19w0gTI\">https://www.youtube.com/watch?v=0kQC19w0gTI</a></li>\n</ul>","frontmatter":{"title":"생활코딩 Docker 이미지 만드는 법","date":"2022-01-11","description":null,"tags":["docker"]}},"previous":{"fields":{"slug":"/reactjs/chartjs1/"},"frontmatter":{"title":"react-chartjs 에서 라인에 glow 효과 주는 법"}},"next":{"fields":{"slug":"/docker/practice/react-nginx-docker/"},"frontmatter":{"title":"리액트 어플리케이션을 nginx 정적 서버에 배포하는 도커 이미지 만들기"}}},"pageContext":{"id":"c70e72a4-a4a6-51a6-b6a2-1f86e0702c43","previousPostId":"8ad0a4bb-6328-5506-8a1a-a451b816b505","nextPostId":"54e05852-a32f-58fa-8dc9-74d70ad7760e"}},
    "staticQueryHashes": ["2841359383","3708219967"]}