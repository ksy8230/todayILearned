<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.0"/><meta data-react-helmet="true" name="description" content="사내에서 공통 모듈만 모아둔 라이브러리를 Storybook을 이용해 만들었는데 급하게 만들다보니 번들하고 배포하는 과정에서 아쉬운 부분이 보여 사이드 프로젝트를 진행하며 조금 더 공부해 본 내용을 정리하려고 한다. 개발 환경 버전 node v14.17.5 npm v.6.14.1…"/><meta data-react-helmet="true" property="og:title" content="Storybook으로 공통 모듈 컨벤션 만들기 (feat.rollup, tailwindcss)"/><meta data-react-helmet="true" property="og:description" content="사내에서 공통 모듈만 모아둔 라이브러리를 Storybook을 이용해 만들었는데 급하게 만들다보니 번들하고 배포하는 과정에서 아쉬운 부분이 보여 사이드 프로젝트를 진행하며 조금 더 공부해 본 내용을 정리하려고 한다. 개발 환경 버전 node v14.17.5 npm v.6.14.1…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="-"/><meta data-react-helmet="true" name="twitter:title" content="Storybook으로 공통 모듈 컨벤션 만들기 (feat.rollup, tailwindcss)"/><meta data-react-helmet="true" name="twitter:description" content="사내에서 공통 모듈만 모아둔 라이브러리를 Storybook을 이용해 만들었는데 급하게 만들다보니 번들하고 배포하는 과정에서 아쉬운 부분이 보여 사이드 프로젝트를 진행하며 조금 더 공부해 본 내용을 정리하려고 한다. 개발 환경 버전 node v14.17.5 npm v.6.14.1…"/><meta data-react-helmet="true" name="google-site-verification" content="M0Wa_Sh6Ip9woLirwOec9KhuVfJmogHmiDoSA0nZEc0"/><style data-href="/todayILearned/styles.1051625ceedf3014857d.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/todayILearned/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/todayILearned/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/todayILearned/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/todayILearned/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/todayILearned/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/todayILearned/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/todayILearned/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/todayILearned/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/todayILearned/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/todayILearned/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/todayILearned/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/todayILearned/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/todayILearned/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/todayILearned/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/todayILearned/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/todayILearned/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/todayILearned/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/todayILearned/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/todayILearned/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/todayILearned/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/todayILearned/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/todayILearned/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/todayILearned/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/todayILearned/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/todayILearned/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/todayILearned/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}a{text-decoration:none}.blog-post header .date{font-size:var(--fontSize-0)}.blog-post ol,.blog-post ul{margin-left:var(--spacing-6)}.blog-post blockquote li,.blog-post blockquote ol,.blog-post blockquote ul{margin:0}.blog-post blockquote ol li,.blog-post blockquote ul li{margin-bottom:.75rem}.blog-post ol li:last-child,.blog-post ul li:last-child{margin-bottom:0}.blog-post a{color:var(--color-link);text-decoration:underline}.blog-post :not(pre)>code[class*=language-]{background:#f9f1f3;color:#ff3860;padding:0 .5rem;text-shadow:none}.blog-post blockquote{background-color:#f0f2f5;font-size:16px;font-style:normal;margin:var(--spacing-8) var(--spacing-0) var(--spacing-8) var(--spacing-0);padding:1.25rem}.blog-post table th{background-color:#7078d1;color:#fff}.blog-post table th,td{border:4px solid #fff;padding:.25rem 0}.blog-post table td{background-color:#f7f7f7}.blog-post strong{color:var(--color-strong);font-weight:500}.blog-post .token.operator{background:transparent}.blog-post details{cursor:pointer;margin-bottom:var(--spacing-8)}.blog-post details summary{margin-bottom:var(--spacing-4)}.blog-post .token.operator{background:none}::selection{background:rgba(112,120,209,.2);color:#dd0700}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-family:var(--font-body)!important;font-size:1em}pre[class*=language-]{padding:1.5em 0 1.5em 3.8em!important}.line-numbers .line-numbers-rows{top:1.5em!important;width:2.5rem!important}.line-numbers-rows>span:before{padding-right:0!important;text-align:center!important}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-family:var(--font-body)!important;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none;max-width:100%;width:auto}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-thumb{background-color:var(--color-primary);border-radius:10px;height:17%}::-webkit-scrollbar-track{background-color:#eee}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:60rem;--maxWidth-5xl:67.5rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:"Noto Sans KR",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Apple SD Gothic Neo",Roboto,"Noto Sans KR",NanumGothic,"Malgun Gothic",sans-serif;--font-body:var(--fontFamily-sans);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--lineHeight-high:1.725;--fontSize-small:0.75rem;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-strong:#0c60c8;--color-link:#448ce4;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-5);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-4)}h3{font-size:var(--fontSize-3)}h4{font-size:var(--fontSize-2)}h5{font-size:var(--fontSize-1)}h6{font-size:var(--fontSize-0)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-high);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:61px auto 0;max-width:var(--maxWidth-5xl);padding:var(--spacing-5) var(--spacing-5)}.global-header{background-color:#fff;border-bottom:1px solid #ddd;height:60px;left:0;line-height:60px;margin:0;padding:0 5%;position:fixed;top:0;width:100%;z-index:10}.global-header a,[aria-current]:not([aria-current=false]){color:#7078d1!important;font-weight:700}.left-navigation{background-color:#fdfdfd;border-right:1px solid #ddd;height:100vh;left:0;position:fixed;top:0;width:15%}.left-navigation .home{padding:var(--spacing-4)}.left-navigation .sidebar-links{padding:0 var(--spacing-4)}.left-navigation .sidebar-links li{list-style:none;margin-bottom:var(--spacing-0)}.left-navigation .sidebar-links>li{cursor:pointer;margin-bottom:var(--spacing-5)}.left-navigation .sidebar-links>li.open section ul{max-height:500px;overflow-y:auto}.left-navigation .sidebar-links>li section ul{max-height:0;overflow:hidden;transition:all .3s}.left-navigation .sidebar-links li section p{margin:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-0)}.left-navigation .sidebar-links li section ul{margin-left:var(--spacing-1)}.left-navigation .sidebar-links li section ul li a{color:#555;font-size:12px;text-decoration:none}.contents-wrap{margin-top:var(--spacing-4)}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{align-items:center;display:flex;margin-bottom:var(--spacing-8)}.bio p,.bio-avatar{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}.gatsby-highlight pre{border-radius:10px}.blog-post-container{display:flex}.blog-post-container .blog-post{flex-basis:74%;flex-grow:0;max-width:74%}.blog-post-container .blog-table{flex-basis:26%;flex-grow:0;font-size:.95rem;max-width:26%}.table-of-contents{position:-webkit-sticky;position:sticky;top:75px}.table-of-contents a{border-radius:6px;color:var(--color-text);color:rgba(59,69,78,.7);display:block;letter-spacing:-.045rem;overflow:hidden;padding:4px 8px;text-decoration:none;transition:all .25s ease 0s}.table-of-contents a:hover{background-color:#cfd8dc}.table-of-contents li,.table-of-contents p{margin-bottom:var(--spacing-0)}.table-of-contents ul{list-style:none;margin-bottom:32px;margin-left:10%}.table-of-contents ul ul{border-left:2px solid #dddddf;margin:0 0 0 20px;padding:0}.table-of-contents ul ul li{font-size:.85rem;margin-bottom:0;margin-left:10px}.utterances{max-width:100%!important}@media (max-width:48rem){.blog-post-container .blog-post{flex-basis:100%;max-width:100%}.blog-table{display:none}}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{color:#000;text-shadow:0 1px #fff}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.home-module--container--0aba5{margin:3rem auto;max-width:600px}.home-module--section--91350{flex:1 1}.home-module--row--87db9{display:flex}.home-module--postsWrap--2f1f3{display:flex;flex-wrap:wrap;justify-content:flex-start}.home-module--post--e8da4{border:1px solid #ddd;height:auto;margin:0 .5% 1%;min-height:15rem;min-width:30%;width:32.33%}.home-module--tagsWrap--58296{display:flex;flex-wrap:wrap;margin:0 .5% .5rem}.home-module--post_tag--05e00{border:1px solid #ddd;border-radius:3px;cursor:pointer;display:block;font-size:.75rem;font-weight:400;margin-right:.5rem;padding:.25rem .5rem;transition:all .4s}.home-module--post_tag_active--53d55{background-color:var(--color-primary);border:1px solid transparent;color:#fff;font-weight:400}.home-module--post_list_tag--07435{font-size:var(--fontSize-small);margin-right:.5rem}.home-module--post_tag_count--e99db{margin-left:.25rem}.home-module--thumbnail--49edb{background-color:#ddd;min-height:7rem}.home-module--post_content--160ba{padding:.5rem}.home-module--post_content--160ba p{font-weight:600;letter-spacing:-.7px;margin-bottom:var(--spacing-0);min-height:5rem}.home-module--post_content_title--7a38a{font-size:14px}@media (max-width:60rem){.home-module--post--e8da4{width:100%}}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .custom-class.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .custom-class.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .custom-class svg,
    h2 .custom-class svg,
    h3 .custom-class svg,
    h4 .custom-class svg,
    h5 .custom-class svg,
    h6 .custom-class svg {
      visibility: hidden;
    }
    h1:hover .custom-class svg,
    h2:hover .custom-class svg,
    h3:hover .custom-class svg,
    h4:hover .custom-class svg,
    h5:hover .custom-class svg,
    h6:hover .custom-class svg,
    h1 .custom-class:focus svg,
    h2 .custom-class:focus svg,
    h3 .custom-class:focus svg,
    h4 .custom-class:focus svg,
    h5 .custom-class:focus svg,
    h6 .custom-class:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 100)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Storybook으로 공통 모듈 컨벤션 만들기 (feat.rollup, tailwindcss) | ksy8230.github.io</title><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="true"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&amp;display=swap"/><link rel="alternate" type="application/rss+xml" title="Gatsby Starter Blog RSS Feed" href="/todayILearned/rss.xml"/><link rel="icon" href="/todayILearned/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/todayILearned/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/todayILearned/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/todayILearned/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/todayILearned/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/todayILearned/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/todayILearned/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/todayILearned/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/todayILearned/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/todayILearned/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="sitemap" type="application/xml" href="/todayILearned/sitemap.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a href="/todayILearned/">Today I Learn</a></header><div class="contents-wrap"><main><div class="blog-post-container"><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Storybook으로 공통 모듈 컨벤션 만들기 (feat.rollup, tailwindcss)</h1><p class="date">2022-12-26</p></header><section itemProp="articleBody"><p>사내에서 공통 모듈만 모아둔 라이브러리를 Storybook을 이용해 만들었는데 급하게 만들다보니 번들하고 배포하는 과정에서 아쉬운 부분이 보여 사이드 프로젝트를 진행하며 조금 더 공부해 본 내용을 정리하려고 한다.</p>
<p><strong>개발 환경 버전</strong><br>
node v14.17.5<br>
npm v.6.14.14<br>
webpack 5</p>
<h2 id="1-storybook을-사용하려는-이유" style="position:relative;">1. Storybook을 사용하려는 이유<a href="#1-storybook%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%A0%A4%EB%8A%94-%EC%9D%B4%EC%9C%A0" aria-label="1 storybook을 사용하려는 이유 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<ol>
<li>
<p>자주 사용하는 코드만큼은 <strong>문서화</strong>시켜놓고 싶다.<br>
코드에 대한 간략한 명세서가 있다면 다른 사람이 해당 코드를 봤을 때 이해가 쉬울 것이다.</p>
</li>
<li>
<p>자주 사용하는 코드는 <strong>공통 라이브러리</strong>로 묶어놓고 싶다.<br>
프로젝트의 개수는 쌓여가지만 그 안에 활용하는 코드 및 기능은 동일한데 이 코드들이 프로젝트별로 각각 다르다면 유지보수할 때 괴로우니 미리 묶어놓자.</p>
</li>
<li>
<p>코드 뿐만 아니라 <strong>디자인 또한 모듈화</strong>시키고 싶다.<br>
팀 특성상 프론트개발자가 곧 디자이너이기도해서 프론트의 코드와 디자인이 일체화되었으면 좋겠다는 생각에 도입했는데 사실 이 부분은 유연하게 가져가도 좋을 것 같다. (프로젝트마다 디자인이 작게 작게 변할 수도 있으니까) 당장 급한 것은 기능들을 모듈화시키는 것이고 디자인적인 부분에서 공통화시킬 개념은 색상값 정도로 생각하고 있다.</p>
</li>
</ol>
<h2 id="2-simple-design-kit-초기-설정" style="position:relative;">2. simple-design-kit✨ 초기 설정<a href="#2-simple-design-kit-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95" aria-label="2 simple design kit 초기 설정 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>simple-design-kit 프로젝트는 컴포넌트 명세서 &#x26; 공통 모듈들을 라이브러리화시키는 용도이므로 모든 종속성 설치 라이브러리에 대해 짚고 넘어가며 만들기 위해 CRA 로 만들지 않았다.</p>
<h3 id="packagejson-파일-만들기" style="position:relative;">package.json 파일 만들기<a href="#packagejson-%ED%8C%8C%EC%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-label="packagejson 파일 만들기 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<blockquote>
<p>package.json ?<br>
현재 프로젝트에 대한 정보(이름, 버전, 설명, 저자, 라이센스 종류 등)와 패키지 매니저(npm, yarn)를 통해 설치한 의존성 모듈들로는 무엇이 있는지 관리해 주는 파일이다.</p>
</blockquote>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token function">npm</span> init <span class="token parameter variable">--yes</span></code></pre></div>
<div class="gatsby-highlight" data-language="json"><pre style="counter-reset: linenumber 0" class="language-json line-numbers"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"simple-design-kit"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"front lib for design component kit"</span><span class="token punctuation">,</span>
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"build/index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"build/index.es.js"</span><span class="token punctuation">,</span>
  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"build"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"rollup -c rollup.config.js"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  ...
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<ul>
<li>
<p>name : 라이브러리 이름 지정</p>
</li>
<li>
<p>version : 배포 버전</p>
</li>
<li>
<p>main : 빌드시킨 결과물은 build 폴더에 담을 예정이고 cjs 포맷으로 빌드된 index를 메인 파일로 사용할 예정이다.</p>
<p>type:module을 설정하면 우리가 만든 라이브러리를 es 포맷으로도 외부 프로젝트에서 불러올 수 있으나 이 경우 package.json 의 역할은 프로젝트가 아닌 모듈 명세서로만 한정된다.<br>
필자는 하나의 package.json으로 스토리북+모듈화 두 가지 기능을 운용할 예정이므로 type:module 옵션 설정을 하지 않았다. 이렇게 되면 기본적으로 해당 package.json으로 라이브러리 배포 시 외부에서 읽어들일 수 있는 포맷은 cjs 포맷이 된다. 따라서 빌드 결과물 중 cjs 포맷으로 떨궈진 폴더의 index.js를 메인 엔트리로 잡을 예정이다.</p>
</li>
</ul>
<h2 id="3-컴포넌트-구성에-필요한-설치" style="position:relative;">3. 컴포넌트 구성에 필요한 설치<a href="#3-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B5%AC%EC%84%B1%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-%EC%84%A4%EC%B9%98" aria-label="3 컴포넌트 구성에 필요한 설치 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>npm 혹은 yarn 패키지 매니저를 통해서 package.json에 내가 만들고자하는 프로젝트에 필요한 의존성 모듈(라이브러리)들을 설치할 수 있는데 이때 <code class="language-text">-dev</code>, <code class="language-text">-D</code> 옵션을 추가할 수 있다. 이 옵션을 추가하면 프로젝트의 개발 모드에서만 설치되는 <code class="language-text">devDependencies</code> 리스트로 기재되어 실제 배포할 때 가벼운 버전의 프로젝트로 빌드할 수 있다.<br>
(내가 설치하는 라이브러리가 개발모드에서만 필요한지 배포모드에서도 필요한지 꼭 체크해서 날씬한 배포 프로젝트를 만들자)</p>
<p><strong>스토리북은 프론트 프레임워크 위에서 구동하는 UI 구성 요소용 개발 환경이다.</strong> 리액트를 예로 들자면 리액트 어플리케이션이 localhost:3000 에서 구동할 때 스토리북은 localhost:8000에서 단독으로 실행될 수 있다. 하지만 리액트도, 앵귤러도, 뷰도 없는 빈 프로젝트 위에서는 만들어지지 않는다. 그러므로 스토리북을 얹을 프론트 작업물이 선행으로 세팅되어야 한다.</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh"><span class="token function">npm</span> <span class="token function">install</span> react react-dom @types/react typescript <span class="token parameter variable">-D</span></code></pre></div>
<ul>
<li>react : 리액트 환경에서 사용할 컴포넌트가 필요하므로 리액트 라이브러리를 설치.</li>
<li>react-dom : 리액트 라이브러리와 한쌍을 이루는 라이브러리로, 리액트를 위해 존재하는 돔의 진입 포인트 역할을 하는 라이브러리 설치.</li>
<li>@types/react : 컴포넌트 코드들을 타입스크립트로 개발할 것이므로 리액트의 타입을 불러오는 라이브러리 설치.</li>
<li>typescript : 타입이 입혀진 컴포넌트를 개발할 예정이므로 타이핑 언어 설치.</li>
</ul>
<div class="gatsby-highlight" data-language="json"><pre style="counter-reset: linenumber 0" class="language-json line-numbers"><code class="language-json"><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"declaration"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"declarationDir"</span><span class="token operator">:</span> <span class="token string">"build"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"dom"</span><span class="token punctuation">,</span> <span class="token string">"dom.iterable"</span><span class="token punctuation">,</span> <span class="token string">"esnext"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"skipLibCheck"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"allowSyntheticDefaultImports"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"esnext"</span><span class="token punctuation">,</span>
    <span class="token property">"moduleResolution"</span><span class="token operator">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span>
    <span class="token property">"resolveJsonModule"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
    <span class="token property">"typeRoots"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./types"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"components"</span><span class="token punctuation">,</span> <span class="token string">"types"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3 id="tsconfig-설정" style="position:relative;">tsconfig 설정<a href="#tsconfig-%EC%84%A4%EC%A0%95" aria-label="tsconfig 설정 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>타입핑된 코드는 개발자 입장에서 친절하고 유용하지만 결국은 브라우저가 해석하기 위한 자바스크립트 코드로 트랜스파일되어야 한다. <code class="language-text">compilerOptions</code> 에서 트랜스파일을 어떤 설정값으로 할지 세팅할 수 있고 <code class="language-text">include</code> 에 들어간 값들은 타입스크립트의 트랜스파일 대상 타겟이 된다. 이 배열에 types라는 폴더도 타겟 대상으로 추가해, 타입을 지원하지 않는 써드파티 라이브러리의 경우 내가 직접 타이핑을 해 줘서 내가 만든 라이브러리 모듈에 특정 타입 코드가 들어가도록 설정했다.</p>
<p><code class="language-text">compilerOptions</code> 에 설정한 옵션값들을 하나씩 설명하면 다음과 같다.</p>
<p><strong>declaration</strong>: (중요✔) 해당하는 코드의 .d.ts 파일을 생성한다. 빌드시켜 외부에서 사용할 컴포넌트들을 편집기에서 클릭하면 타입 정보 파일이 보였으면 하여 true로 설정했다.<br>
<strong>declarationDir</strong>: (중요✔) 프로젝트를 빌드시킬 폴더 경로를 지정한다.<br>
<strong>target</strong>: 트랜스파일될 자바스크립트 표준 규격 대상 버전 지정한다. 구버전의 브라우저도 지원할 수 있도록 es5로 지정했다.<br>
<strong>lib</strong>: target에서 지정한 자바스크립트 표준 규격의 버전에 따라 기본값이 설정된다. 그런데 작성한 코드들이 es6 버전에만 나오는 문법들이 있으므로 es6 기본값들을 넣어줬고 import 문법을 사용하므로 esnext를 추가했다.<br>
<strong>skipLibCheck</strong>: lib에 대한 타입 검사까지는 하고 싶지 않아 true로 설정했다.<br>
<strong>esModuleInterop</strong>: CommonJS와 ES 모듈 간의 상호 운용성을 활성화한다. true로 설정하면 ES6 모듈 사양을 준수해 CommonJS 모듈을 가져올 수 있게 된다.<br>
<strong>allowSyntheticDefaultImports</strong>: 트랜스파일될 코드가 module.exports.default 형식이 아니라도 허용시킨다.<br>
<strong>strict</strong>: 모든 엄격한 타입-체킹 옵션을 활성화했다.<br>
<strong>module</strong>: 모듈을 위한 코드 생성 타입을 설정한다. 최신 문법까지 지원하는 esnext 타입으로 설정했다.<br>
<strong>moduleResolution</strong>: 생성되는 코드들을 누가 해석하는지 지정한다. node로 설정했다.<br>
<strong>resolveJsonModule</strong>: import 시키는 모듈들 중 json 파일 형식을 허용한다.<br>
<strong>jsx</strong>: jsx 속성을 활성화하면 프로젝트에서 .tsx 파일을 사용할 수 있다.<br>
<strong>typeRoots</strong>: 유형 정의를 포함할 폴더 목록을 지정한다. 타입핑이 되어 있지 않은 라이브러리의 경우 이곳에 타입을 기재해 준다.</p>
<p>또한 작성한 컴포넌트의 interface나 type들을 export 시켜주지 않으면 빌드할 때 에러가 나니 꼭 기재한 타입들은 export 시켜주자.</p>
<h3 id="storybook-설정" style="position:relative;">Storybook 설정<a href="#storybook-%EC%84%A4%EC%A0%95" aria-label="storybook 설정 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> @storybook/react @babel/core babel-loader
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> @storybook/addon-links @storybook/addon-essentials @storybook/addon-interactions @storybook/addon-postcss
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> @storybook/manager-webpack5 html-webpack-plugin</code></pre></div>
<ul>
<li>
<p>@storybook/react : 리액트 기반의 스토리북을 실행시켜주는 라이브러리.</p>
</li>
<li>
<p>@babel/core : es6 이상의 최신 문법을 es5 이하의 구 버전 문법으로 변환해 주는 라이브러리.</p>
</li>
<li>
<p>babel-loader : 바벨 및 웹팩을 사용해 자바스크립트 파일 변환시켜주는 라이브러리.</p>
</li>
<li>
<p>@storybook/addon-links : 스토리북 내에서 링크 이동을 지원하는 스토리북 애드온.</p>
</li>
<li>
<p>@storybook/addon-essentials : 스토리북에서 자주 사용하는 필수 애드온 모음집. (action, backgrounds, controls, docs, toolbars, viewport)</p>
</li>
<li>
<p>@storybook/addon-interactions : 스토리북에서 컴포넌트 상호작용 및 테스트를 시각적으로 디버깅하도록 도와주는 애드온.</p>
</li>
<li>
<p>@storybook/addon-postcss : 만들어진 스토리에 postcss 전처리기를 적용해주는 애드온.</p>
<p><strong>설치한 스토리북 버전이 6.x인 경우 추가 설치 필요</strong></p>
<ul>
<li>@storybook/manager-webpack5 : 스토리북 정적 파일을 빌드시키는 @storybook/core-server가 사용하는 빌더 (webpack5로 구현됨)</li>
<li>html-webpack-plugin : 웹팩 플러그인으로, 스토리북의 빌더가 html 파일을 생성할 때 단순화시켜주는 라이브러리이다.</li>
</ul>
</li>
</ul>
<p><strong>스토리북 애드온 연결</strong></p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token comment">// .storybook/main.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">stories</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"../**/*.stories.mdx"</span><span class="token punctuation">,</span> <span class="token string">"../**/*.stories.tsx"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">addons</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"@storybook/addon-links"</span><span class="token punctuation">,</span>
    <span class="token string">"@storybook/addon-essentials"</span><span class="token punctuation">,</span>
    <span class="token string">"@storybook/addon-interactions"</span><span class="token punctuation">,</span>
    <span class="token string">"@storybook/addon-postcss"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>스토리북으로 사용할 대상 파일의 확장자를 설정해주고 앞서 설치한 애드온들을 연결해 준다.</p>
<p><strong>스토리북 preloading 될 때 설정</strong></p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token comment">// .storybook/preview.js</span>

<span class="token keyword">import</span> <span class="token string">"../tailwind.css"</span><span class="token punctuation">;</span> <span class="token comment">// tailwindcss 추가</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> parameters <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">argTypesRegex</span><span class="token operator">:</span> <span class="token string">"^on[A-Z].*"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// on***으로 시작하는 함수는 액션 애드온에 연결</span>
  <span class="token literal-property property">controls</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">matchers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(background|color)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3 id="tailwindcss-설정" style="position:relative;">tailwindcss 설정<a href="#tailwindcss-%EC%84%A4%EC%A0%95" aria-label="tailwindcss 설정 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>tailwindcss는 클래스 이름에 대한 정보를 js 파일로 스캔 후 해당 정보에 맞는 스타일을 생성 후 정적 css파일에 작성하는 방식으로 엘리먼트에 스타일을 적용한다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> tailwindcss postcss autoprefixer</code></pre></div>
<ul>
<li>tailwindcss : ui 인터페이스를 빠르게 스타일링해 주는 css 프레임워크.</li>
<li>postcss : 스타일들을 js 플러그인으로 변환해 주는 라이브러리.</li>
<li>autoprefixer : tailwindcss 구문의 접두어를 해석해 주는 라이브러리.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token comment">// tailwind.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./components/**/*.{html,js,jsx,ts,tsx}"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">darkMode</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// or 'media' or 'class'</span>
  <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extend</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">variants</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extend</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>tailwind.config.js 설정 파일에서 content 부분에 tailwindcss를 적용할 대상 파일 경로를 추가해 줬다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token comment">// postcss.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tailwindcss</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">autoprefixer</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber 0" class="language-css line-numbers"><code class="language-css"><span class="token comment">/* tailwind.css */</span>

<span class="token atrule"><span class="token rule">@tailwind</span> base<span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@tailwind</span> components<span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@tailwind</span> utilities<span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@tailwind</span> forms<span class="token punctuation">;</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>postcss.config.js 설정 파일을 통해 tailwindcss를 js 파일로 변환시켜주고 tailwind 접두어를 해석한다.</p>
<h2 id="4-빌드에-필요한-설치" style="position:relative;">4. 빌드에 필요한 설치<a href="#4-%EB%B9%8C%EB%93%9C%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-%EC%84%A4%EC%B9%98" aria-label="4 빌드에 필요한 설치 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>앞으로 만들 컴포넌트 모듈들을 번들시킬 도구로 rollup.js를 선택했다.<br>
<strong>Rollup</strong>은 Webpack과 유사한 모듈 번들러지만 ES6 모듈 형식으로 빌드 결과물을 출력할 수 있다는 장점이 있다. 그리고 이걸 그대로 라이브러리나 패키지로 불러와 사용이 가능하다.<br>
또한 진입점을 여러개로 나눌 수 있어 es모듈 방식과 commonjs모듈 방식 두 가지로 빌드가 가능하다. 결정적으로 Rollup은 Code splitting 면에서도 성능이 우수해 중복된 파일 제거에 강점이 있어 <strong>최소한의 서드파티로 라이브러리를 만들 수 있다</strong>고 판단해 Rollup을 선택했다.</p>
<h3 id="rollup-설정" style="position:relative;">Rollup 설정<a href="#rollup-%EC%84%A4%EC%A0%95" aria-label="rollup 설정 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> rollup rollup-plugin-typescript2
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> rollup-plugin-postcss @rollup/plugin-commonjs @rollup/plugin-node-resolve
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> rollup-plugin-peer-deps-external</code></pre></div>
<ul>
<li>rollup : 모듈들을 번들시켜주는 rollup 라이브러리.</li>
<li>rollup-plugin-typescript2 : 번들할 때 각 코드들의 타입들을 만들어주는 라이브러리.</li>
<li>rollup-plugin-postcss : postcss라는 css 후처리기로 tailwindcss 프레임워크가 웹앱에 정적 css 파일로 작성되도록 도와주는 rollup 전용 postcss 플러그인.</li>
<li>@rollup/plugin-commonjs : CommonJS 모듈을 ES6으로 변환하여 rollup 번들에 포함할 수 있도록 하는 플러그인.</li>
<li>@rollup/plugin-node-resolve : node_modules에서 타사 모듈을 사용하기 위해 노드 해결 알고리즘을 사용하여 모듈을 찾는 플러그인.</li>
<li>rollup-plugin-peer-deps-external : rollup 번들에서 peerDependencies에 기재된 라이브러리들은 자동으로 제외시켜주는 라이브러리.</li>
</ul>
<p>나는 rollup 설정 파일을 아래와 같이 사용했다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">"@rollup/plugin-node-resolve"</span>
<span class="token keyword">import</span> peerDepsExternal <span class="token keyword">from</span> <span class="token string">"rollup-plugin-peer-deps-external"</span>
<span class="token keyword">import</span> postcss <span class="token keyword">from</span> <span class="token string">"rollup-plugin-postcss"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> terser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"rollup-plugin-terser"</span>
<span class="token keyword">import</span> typescript <span class="token keyword">from</span> <span class="token string">"rollup-plugin-typescript2"</span>
<span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">"@rollup/plugin-commonjs"</span>

<span class="token keyword">import</span> pkg <span class="token keyword">from</span> <span class="token string">"./package.json"</span>
<span class="token keyword">const</span> tailwindcss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"tailwindcss"</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">"./index.ts"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">dir</span><span class="token operator">:</span> pkg<span class="token punctuation">.</span>main<span class="token punctuation">,</span> <span class="token comment">// "build/index.js"</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">"cjs"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">preserveModules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">dir</span><span class="token operator">:</span> pkg<span class="token punctuation">.</span>module<span class="token punctuation">,</span> <span class="token comment">// "build/index.es.js"</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">"es"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">preserveModules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">peerDepsExternal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">tailwindcss</span><span class="token punctuation">(</span><span class="token string">"./tailwind.config.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"autoprefixer"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"cssnano"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">preset</span><span class="token operator">:</span> <span class="token string">"default"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">typescript</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">tsconfig</span><span class="token operator">:</span> <span class="token string">"./tsconfig.json"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"node_modules/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><strong>rollup 파일 i/o 설정</strong></p>
<ul>
<li>만들어진 모든 컴포넌트들은 index.ts 파일에서 export 시키므로 rollup의 엔트리 경로를 “./index.ts”로 잡았다.</li>
<li>빌드시킨 컴포넌트들은 es, cjs 형식으로 빌드되는데 해당 경로는 package.json에서 불러오도록 설정했다.</li>
<li>각 빌드 엔트리 포인트에 preserveModules 옵션값을 추가해 기존 폴더 구조와 동일하게 빌드시켰다. 이렇게 기존 폴더 구조로 배포하면 아래 두 가지 방식으로 import하여 사용할 수 있다.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"simple-design-kit"</span><span class="token punctuation">;</span> <span class="token comment">// option 1</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"simple-design-kit/build/index.js/components/input"</span><span class="token punctuation">;</span> <span class="token comment">// option 2</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p><strong>rollup 플러그인 설정</strong></p>
<ul>
<li>peerDepsExternal : 내가 만든 해당 라이브러리의 의존성 모듈만 기재해주고 실제로 배포하는 폴더에는 해당 라이브러리는 배제해 준다.</li>
<li>postcss : 빌드시킨 컴포넌트들은 tailwindcss가 입혀져있어 tailwindcss를 css로 변환해 배포된 컴포넌트에 스타일을 적용했다.</li>
<li>resolve : 컴포넌트 작업 중 dayjs 등 써드파티 라이브러리를 사용하게 되면 해당 라이브러리의 모듈을 찾아주도록 설정했다.</li>
<li>typescript : 빌드된 컴포넌트들은 tsconfig.json 설정 파일에 따라 타이핑되어 배포된다.</li>
<li>commonjs : 나는 cjs 뿐만 아니라 es 형식의 빌드도 했기 때문에 commonjs 포맷을 es 포맷으로 바꿔주는 플러그인을 추가했다.</li>
<li>terser : 빌드 결과 코드들의 압축시켜주는 플러그인을 추가했다.</li>
</ul>
<p>현재까지 작업 폴더의 구조는 아래와 같다.<br>
루트에 설정 파일과 엔트리 index 파일을 작성하고, 배포시킬 컴포넌트들은 components 폴더 안에 넣어놨다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">├── build/
│   ├── index.es.js/
│   └── index.js/
├── components/
│   ├── button
│   └── input
├── types/
├── index.ts
├── rollup.config.js
├── tailwind.config.js
├── postcss.config.js
├── tsconfig.json
├── tailwind.css
└── package.json</code></pre></div>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 160px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/todayILearned/static/8d7a19eefc42f09ca4ae8d3c38e769a9/0913d/build-output.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 180.37974683544306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5cpMiyjOsiqCA//EABUQAQEAAAAAAAAAAAAAAAAAAAEw/9oACAEBAAEFAhv/AP/EABcRAAMBAAAAAAAAAAAAAAAAAAABESD/2gAIAQMBAT8BiIs//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIP/aAAgBAgEBPwGsrz//xAAWEAADAAAAAAAAAAAAAAAAAAAgMDH/2gAIAQEABj8COI//xAAgEAACAQMEAwAAAAAAAAAAAAAAASEQEUExYaHwUbHx/9oACAEBAAE/IWrT0T4LiQ4xwWF2CfiiXbDjHFE9i+1P/9oADAMBAAIAAwAAABDINbzwD//EABYRAQEBAAAAAAAAAAAAAAAAAGEAIP/aAAgBAwEBPxAos//EABkRAAIDAQAAAAAAAAAAAAAAAAAhESAxYf/aAAgBAgEBPxBmnYh7T//EACEQAQEAAQQABwAAAAAAAAAAAAERABAxQVEhYXGBkaGx/9oACAEBAAE/ECoBpNj+4gL7rldGOlnM2HArZfMZWN2l+WIaxO/BpYspZyxHBelGkDY+uQ8PvT//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="빌드 결과물"
        title="빌드 결과물"
        src="/todayILearned/static/8d7a19eefc42f09ca4ae8d3c38e769a9/0913d/build-output.jpg"
        srcset="/todayILearned/static/8d7a19eefc42f09ca4ae8d3c38e769a9/ff44c/build-output.jpg 158w,
/todayILearned/static/8d7a19eefc42f09ca4ae8d3c38e769a9/0913d/build-output.jpg 160w"
        sizes="(max-width: 160px) 100vw, 160px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>rollup으로 빌드하면 build 폴더가 만들어지면서 하위에 index.es.js 폴더와 index.js 폴더가 생성된다.<br>
이 폴더들은 원래의 구조를 그대로 가져다 빌드시켜놔서 결과물을 보기에도 편하고 외부에서 라이브러리를 사용할 때 전체 모듈을 import 시키는 것이 아닌 특정 모듈만 불러올 수 있어 tree-shaking 작업도 가능해졌다!</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 171px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/todayILearned/static/84bb9496a396072a97ef072f547e20a2/0b054/build-output2.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 103.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAHlAyCwrGYP/8QAFxABAAMAAAAAAAAAAAAAAAAAAQAQIP/aAAgBAQABBQLREK//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/AcrKz//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8ByIiP/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwIf/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERECFh/9oACAEBAAE/IURe4h4qa7SKqkP/2gAMAwEAAgADAAAAEKPIfv/EABYRAQEBAAAAAAAAAAAAAAAAAAABYf/aAAgBAwEBPxCK0bP/xAAWEQEBAQAAAAAAAAAAAAAAAAAAYRD/2gAIAQIBAT8QyCD/xAAgEAEAAgAGAwEAAAAAAAAAAAABABEhMUFRYYFxocGx/9oACAEBAAE/EOvr7EE/CRq8MosAvnM+xnN9VHOUQYDRN/EMwterKbT/2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="빌드 결과물"
        title="빌드 결과물"
        src="/todayILearned/static/84bb9496a396072a97ef072f547e20a2/0b054/build-output2.jpg"
        srcset="/todayILearned/static/84bb9496a396072a97ef072f547e20a2/ff44c/build-output2.jpg 158w,
/todayILearned/static/84bb9496a396072a97ef072f547e20a2/0b054/build-output2.jpg 171w"
        sizes="(max-width: 171px) 100vw, 171px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>index.js 폴더 안의 input/index.js를 열어보면 postcss로 변환시킨 tailwind.css.js를 호출 중이고 tailwind.css.js를 열어보면 해당 컴포넌트 스타일링을 위해 내가 사용한 tailwindcss class에 해당하는 css만 기재되어있다.</p>
<h2 id="5-vercel-배포" style="position:relative;">5. vercel 배포<a href="#5-vercel-%EB%B0%B0%ED%8F%AC" aria-label="5 vercel 배포 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>배포까지 완료된 작업물은 <a href="https://simple-design-kit.vercel.app/">simple-design-kit</a>에서 확인할 수 있다.</p>
<h2 id="6-요약" style="position:relative;">6. 요약<a href="#6-%EC%9A%94%EC%95%BD" aria-label="6 요약 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<ul>
<li>스토리북을 이용해 공통 컴포넌트를 개발 및 관리할 수 있다.</li>
<li>스토리북을 UI 컨벤션으로만 활용할 수도 있는데 이때 index 파일에 배포용 컴포넌트만 따로 export 시키면 된다.</li>
<li>rollup을 이용해 export 된 모듈들만 번들시킬 수 있다.</li>
<li>외부에서 내가 작성한 라이브러리의 타이핑을 보기 위해선 번들할 때 tsconfig 설정을 반드시 해 줘야한다.</li>
<li>기본적으로 스토리북은 웹팩으로 빌드되고, v6.2 부터는 웹팩5를 지원하는데 <code class="language-text">npx sb</code>와 같은 명령어가 아닌 수동으로 스토리북을 설치하는 경우 웹팩 관련 추가 설치 작업이 필요하다</li>
<li>package.json 파일에 <code class="language-text">type:module</code> 옵션을 주면 디폴트로 es 모듈로도 외부에서 불러올 수 있다. 하지만 이를 설정하지 않으면 기본적으로는 cjs 모듈로 외부에서 읽어들인다.</li>
</ul></section></article><div class="blog-table"><div class="table-of-contents"><ul>
<li>
<p><a href="#1-storybook%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%A0%A4%EB%8A%94-%EC%9D%B4%EC%9C%A0">1. Storybook을 사용하려는 이유</a></p>
</li>
<li>
<p><a href="#2-simple-design-kit-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95">2. simple-design-kit✨ 초기 설정</a></p>
<ul>
<li><a href="#packagejson-%ED%8C%8C%EC%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0">package.json 파일 만들기</a></li>
</ul>
</li>
<li>
<p><a href="#3-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B5%AC%EC%84%B1%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-%EC%84%A4%EC%B9%98">3. 컴포넌트 구성에 필요한 설치</a></p>
<ul>
<li><a href="#tsconfig-%EC%84%A4%EC%A0%95">tsconfig 설정</a></li>
<li><a href="#storybook-%EC%84%A4%EC%A0%95">Storybook 설정</a></li>
<li><a href="#tailwindcss-%EC%84%A4%EC%A0%95">tailwindcss 설정</a></li>
</ul>
</li>
<li>
<p><a href="#4-%EB%B9%8C%EB%93%9C%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-%EC%84%A4%EC%B9%98">4. 빌드에 필요한 설치</a></p>
<ul>
<li><a href="#rollup-%EC%84%A4%EC%A0%95">Rollup 설정</a></li>
</ul>
</li>
<li>
<p><a href="#5-vercel-%EB%B0%B0%ED%8F%AC">5. vercel 배포</a></p>
</li>
<li>
<p><a href="#6-%EC%9A%94%EC%95%BD">6. 요약</a></p>
</li>
</ul></div></div></div><hr/><div id="comment"></div></main><footer>© 2021, COPYRIGHT ALL RIGHT KSY8230<a href="https://www.gatsbyjs.com"></a></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/project/work/mollang/1.storybook/";window.___webpackCompilationHash="ea1f3c4773a5848febc0";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-afa68794cf9a69af341a.js"],"app":["/app-c154fc21242975beb867.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0c66d2172856118fd382.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ae6b18ca2fa1bb73ebc3.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-e500a6fb88c5bce65ce3.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-3eca40859e081028ea64.js"]};/*]]>*/</script><script src="/todayILearned/polyfill-afa68794cf9a69af341a.js" nomodule=""></script><script src="/todayILearned/app-c154fc21242975beb867.js" async=""></script><script src="/todayILearned/framework-21cdc04874840f845a1f.js" async=""></script><script src="/todayILearned/webpack-runtime-5ef15c4c61c54be2a2d4.js" async=""></script></body></html>