<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/todayILearned/styles.e5075fd7108b84c1c96b.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/todayILearned/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/todayILearned/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/todayILearned/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/todayILearned/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/todayILearned/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/todayILearned/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/todayILearned/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/todayILearned/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/todayILearned/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/todayILearned/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/todayILearned/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/todayILearned/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/todayILearned/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/todayILearned/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/todayILearned/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/todayILearned/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/todayILearned/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/todayILearned/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/todayILearned/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/todayILearned/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/todayILearned/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/todayILearned/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/todayILearned/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/todayILearned/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/todayILearned/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/todayILearned/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/todayILearned/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/todayILearned/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}a{text-decoration:none}.blog-post li,.blog-post ul{margin-left:17px}.blog-post blockquote{background-color:#f0f2f5;font-size:16px;font-style:normal;font-weight:500;margin-left:var(--spacing-0);margin-right:var(--spacing-0);padding:.75rem}.blog-post hr+p{margin-bottom:var(--spacing-0)}.blog-post table th{background-color:#7078d1;color:#fff}.blog-post table th,td{border:4px solid #fff;padding:.25rem 0}.blog-post table td{background-color:#f7f7f7}.blog-post strong{background:rgba(112,120,209,.2);color:#dd0700}::selection{background:rgba(112,120,209,.2);color:#dd0700}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-family:var(--font-body)!important;font-size:1em}pre[class*=language-]{padding:1.5em 0 1.5em 3.8em!important}.line-numbers .line-numbers-rows{top:1.5em!important;width:2.5rem!important}.line-numbers-rows>span:before{padding-right:0!important;text-align:center!important}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-family:var(--font-body)!important;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none;max-width:100%;width:auto}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-thumb{background-color:var(--color-primary);border-radius:10px;height:17%}::-webkit-scrollbar-track{background-color:#eee}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:60rem;--maxWidth-5xl:67.5rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:"Noto Sans KR",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Apple SD Gothic Neo",Roboto,"Noto Sans KR",NanumGothic,"Malgun Gothic",sans-serif;--font-body:var(--fontFamily-sans);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:61px auto 0;max-width:var(--maxWidth-5xl);padding:var(--spacing-5) var(--spacing-5)}.global-header{background-color:#fff;border-bottom:1px solid #ddd;height:60px;left:0;line-height:60px;margin:0;padding:0 5%;position:fixed;top:0;width:100%;z-index:10}.global-header a,[aria-current]:not([aria-current=false]){color:#7078d1!important;font-weight:700}.left-navigation{background-color:#fdfdfd;border-right:1px solid #ddd;height:100vh;left:0;position:fixed;top:0;width:15%}.left-navigation .home{padding:var(--spacing-4)}.left-navigation .sidebar-links{padding:0 var(--spacing-4)}.left-navigation .sidebar-links li{list-style:none;margin-bottom:var(--spacing-0)}.left-navigation .sidebar-links>li{cursor:pointer;margin-bottom:var(--spacing-5)}.left-navigation .sidebar-links>li.open section ul{max-height:500px;overflow-y:auto}.left-navigation .sidebar-links>li section ul{max-height:0;overflow:hidden;transition:all .3s}.left-navigation .sidebar-links li section p{margin:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-0)}.left-navigation .sidebar-links li section ul{margin-left:var(--spacing-1)}.left-navigation .sidebar-links li section ul li a{color:#555;font-size:12px;text-decoration:none}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{align-items:center;display:flex;margin-bottom:var(--spacing-8)}.bio-avatar,.bio p{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}.gatsby-highlight pre{border-radius:10px}.blog-post-container{display:flex}.blog-post-container .blog-post{flex-basis:80%;flex-grow:0;max-width:80%}.blog-post-container .blog-table{flex-basis:20%;flex-grow:0;font-size:.95rem;max-width:20%}.table-of-contents{position:-webkit-sticky;position:sticky;top:75px}.table-of-contents a{border-radius:6px;color:var(--color-text);color:rgba(59,69,78,.7);display:block;letter-spacing:-.045rem;overflow:hidden;padding:4px 8px;text-decoration:none;transition:all .25s ease 0s}.table-of-contents a:hover{background-color:#cfd8dc}.table-of-contents li,.table-of-contents p{margin-bottom:var(--spacing-0)}.table-of-contents ul{list-style:none;margin-bottom:32px;margin-left:10%}.table-of-contents ul ul{border-left:2px solid #dddddf;margin:0 0 0 20px;padding:0}.table-of-contents ul ul li{margin-bottom:0;margin-left:10px}.utterances{max-width:100%!important}@media (max-width:48rem){.blog-post-container .blog-post{flex-basis:100%;max-width:100%}.blog-table{display:none}}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{color:#000;text-shadow:0 1px #fff}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.home-module--container--Crpep{margin:3rem auto;max-width:600px}.home-module--section--kTUEU{flex:1 1}.home-module--row--h9uZb{display:flex}.home-module--postsWrap--Lx84a{display:flex;flex-wrap:wrap;justify-content:flex-start}.home-module--post--6NpMA{border:1px solid #ddd;height:auto;margin:0 .5% 1%;min-height:15rem;min-width:30%;width:32.33%}.home-module--tagsWrap--WClgw{display:flex;flex-wrap:wrap;margin:0 .5% .5rem}.home-module--post_tag--BeAPM{background-color:var(--color-primary);border-radius:5px;display:inline-block;font-size:.75rem;margin-bottom:.25rem;margin-right:.25rem;padding:.25rem .5rem}.home-module--post_tag_txt--\+gQVd{color:#fff!important}.home-module--post_tag_count--6Z225{color:#fff!important;margin-left:.25rem}.home-module--thumbnail--Se23y{background-color:#ddd;min-height:7rem}.home-module--post_content--FgurA{padding:.5rem}.home-module--post_content--FgurA p{font-weight:600;letter-spacing:-.7px;margin-bottom:var(--spacing-0);min-height:5rem}.home-module--post_content_title--ejisz{font-size:14px}@media (max-width:60rem){.home-module--post--6NpMA{width:100%}}</style><meta name="generator" content="Gatsby 4.4.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .custom-class.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .custom-class.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .custom-class svg,
    h2 .custom-class svg,
    h3 .custom-class svg,
    h4 .custom-class svg,
    h5 .custom-class svg,
    h6 .custom-class svg {
      visibility: hidden;
    }
    h1:hover .custom-class svg,
    h2:hover .custom-class svg,
    h3:hover .custom-class svg,
    h4:hover .custom-class svg,
    h5:hover .custom-class svg,
    h6:hover .custom-class svg,
    h1 .custom-class:focus svg,
    h2 .custom-class:focus svg,
    h3 .custom-class:focus svg,
    h4 .custom-class:focus svg,
    h5 .custom-class:focus svg,
    h6 .custom-class:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 100)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Javascript 작동 원리 | ksy8230.github.io</title><meta data-react-helmet="true" name="description" content="…"/><meta data-react-helmet="true" property="og:title" content="Javascript 작동 원리"/><meta data-react-helmet="true" property="og:description" content="…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="-"/><meta data-react-helmet="true" name="twitter:title" content="Javascript 작동 원리"/><meta data-react-helmet="true" name="twitter:description" content="…"/><meta data-react-helmet="true" name="google-site-verification" content="iQJt-mA0eawC3btyBDKq6-k19lbYZZgbLWt8mlPnztU"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="true"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&amp;display=swap"/><link rel="alternate" type="application/rss+xml" title="Gatsby Starter Blog RSS Feed" href="/todayILearned/rss.xml"/><link rel="icon" href="/todayILearned/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/todayILearned/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/todayILearned/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/todayILearned/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/todayILearned/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/todayILearned/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/todayILearned/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/todayILearned/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/todayILearned/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/todayILearned/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="sitemap" type="application/xml" href="/todayILearned/sitemap-index.xml"/><link as="script" rel="preload" href="/todayILearned/webpack-runtime-aee77c2175a6eac07148.js"/><link as="script" rel="preload" href="/todayILearned/framework-e413e527015be9a1bdfd.js"/><link as="script" rel="preload" href="/todayILearned/app-5b3bcece027326f3b5b1.js"/><link as="script" rel="preload" href="/todayILearned/component---src-templates-blog-post-js-ae5cdc91524a5abefc8b.js"/><link as="fetch" rel="preload" href="/todayILearned/page-data/javascript/how_it_works2/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/todayILearned/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/todayILearned/page-data/sq/d/3708219967.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/todayILearned/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a href="/todayILearned/">Today I Learn</a></header><div class="contents-wrap"><main><div class="blog-post-container"><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Javascript 작동 원리</h1><p>2022-11-22</p></header><section itemProp="articleBody"><p>새로운 프레임워크가 유난히 빠르게 등장하는 프론트엔드 영역이지만 코어에는 여전히 자바스크립트가 있고 이에 대한 학습이 부족하다는 생각이 들어 짬이 난 김에 공부한 내용을 글로, 그림으로 정리해 보려고 한다.<br>
자바스크립트는 객체 기반의 프로그래밍을 가능하게 해 주는 언어로 주로 웹 브라우저에서 사용이 되고 NodeJS와 같은 자바스크립트 런타임 환경에서도 활용이 가능하다. 자바스크립트를 구동할 수 있는 가장 대중적인 자바스크립트 엔진으로 V8이 있는데 이 엔진은 구글 크롬, NodeJS에서 사용 중이다.<br>
자바스크립트 코드 동작의 근간이 되는 곳부터 시작하기 위해 실행 컨텍스트와 콜스택부터 이해해보자.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203189007-b73a4104-7b20-4d44-868a-87b6dee62901.png" alt="실행컨택스트"></p>
<p><strong>자바스크립트 엔진 = 콜스택 + 메모리로 이루어져있다</strong></p>
<h3 id="실행-컨텍스트" style="position:relative;">실행 컨텍스트<a href="#%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8" aria-label="실행 컨텍스트 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><img src="https://user-images.githubusercontent.com/24996316/203189541-2bfe5764-88bd-42ab-8814-abdae71c9ae0.jpg" alt="Frame 33"></p>
<blockquote>
<p>💡 자바스크립트 코드가 진행되는 상황을 추적하는데 필요한 정보를 모아둔 영역으로 자바스크립트 엔진의 메모리에 필요한 정보들이 할당된다</p>
</blockquote>
<p>동작의 개념을 이해하기 위해 크게 두 영역이 있음을 기억하자.<br>
코드를 실행시키는 <strong>실행 컨텍스트 영역</strong><br>
코드 실행을 위해 저장되는 <strong>메모리 영역</strong></p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>위 코드가 실제로는 어떤 과정을 거쳐 numer 변수 3이 할당되는 걸까.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203006199-a0310b46-e42d-450b-8631-50ce30686340.png" alt="Group 7"></p>
<p>자바스크립트(이하 js)는 우선 전역 메모리에 sum이라는 이름을 가진 함수 정보와 numer라는 변수를 등록시킨다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203006312-553d6baf-cf0a-4ddd-bb18-11ea6bf48743.png" alt="Group 9"></p>
<p>함수 sum(1, 2)의 호출을 통해 전역 실행 컨텍스트에서 sum 함수 실행 컨텍스트가 실행된다. 이 실행 컨텍스트도 위 그림 도식과 마찬가지로 컨텍스트 영역과 메모리 영역(이하 지역 메모리 영역)을 생성한다. 이 지역 메모리 영역에서는 함수가 받은 매개 변수와 연산값을 담을 result 변수를 등록시킨다. 다시 sum 함수 실행 컨택스트로 돌아와서 함수 내부 연산을 실행하면 result에 3이라는 값이 할당된다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203008449-c5fd724d-7e95-4dc8-bab5-7494706e2ab8.png" alt="Group 10"></p>
<p>그리고 이 result 값을 함수가 반환하면 전역 메모리 변수인 number에 3이 할당된다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203007793-a1df4016-f966-4b94-beec-76a08e1f69d0.png" alt="Group 11"></p>
<p>sum 함수가 종료되면 실행 컨텍스트에서 sum 함수 실행 컨텍스트가 사라진다.</p>
<h3 id="콜스택" style="position:relative;">콜스택<a href="#%EC%BD%9C%EC%8A%A4%ED%83%9D" aria-label="콜스택 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<blockquote>
<p>💡 엔진은 콜스택을 통해 현재 실행 중인 실행 컨텍스트가 어떤 것인지 알 수 있다. (aka. 실행 컨텍스트 추적기)</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/24996316/203189789-bccea3c1-5561-4c35-afc0-7359b4b21051.png" alt="Frame 35"></p>
<p>비커처럼 생긴 콜스택이라는 구조체 바닥에 전역 컨텍스트가 있다고 가정하고 다시 다른 예시 코드를 보며 이해해 보자.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> sumResult <span class="token operator">=</span> c <span class="token operator">+</span> d<span class="token punctuation">;</span>
    <span class="token keyword">return</span> sumResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> exterFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> calcResult <span class="token operator">=</span> <span class="token function">exterFn</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> calcResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><img src="https://user-images.githubusercontent.com/24996316/203241814-9deeff15-6b1f-4650-8604-67f17cc92655.png" alt="Frame 48 (2)"></p>
<ol>
<li>해당 코드가 자바스크립트로 실행되면 전역 메모리에 sum 함수, calc 함수, number 변수가 등록된다.</li>
<li>그리고 calc () 호출을 통해 전역 실행 컨텍스트 내부에 calc 함수 실행 컨텍스트가 생성된다. 이때 calc 함수 실행 컨텍스트가 콜스택에 쌓인다.</li>
<li>calc 함수 실행컨텍스트가 만들어질 때 해당 함수와 관련된 정보가 등록된 함수 및 변수들(a, b, exterFn)이 지역 메모리 안에 등록되는데 이때 exterFn 변수는 전역 메모리에 등록된 sum 함수 정보가 연결된다.</li>
<li>이후 exterFn 함수가 호출되면서 exterFn 함수 실행 컨텍스트가 콜스택에 쌓인다.</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/24996316/203241781-08463a46-5c25-4869-8c96-6cb8ef2c5853.png" alt="Frame 49"></p>
<p>이렇게 콜스택에 쌓여 대기 중인 실행 컨텍스트를 자바스크립트 엔진이 콜스택을 보고 위에서부터 차례로 실행하기 시작한다.</p>
<ol>
<li>sum 함수 내부 코드 연산을 통해 sumResult에 3이라는 값이 sum 함수 지역 메모리에 할당되고, sumResult가 반환되면서 calc 메모리의 calcResult 변수에 그 값이 할당된다.</li>
<li>sum 함수가 반환됐기 때문에 여기에 연결되었던 exterFn 함수 실행 컨텍스트가 종료되며 콜스택에서도 삭제된다.</li>
<li>같은 원리로 calc 함수에서 calcResult 값이 반환되어 전역 메모리의 number 변수에 할당된다.</li>
<li>calc 함수가 반환됐기 때문에 calc 함수 실행 컨텍스트가 종료되며 콜스택에서도 삭제된다.</li>
</ol>
<p>계속해서 나오는 전역 메모리, 지역 메모리에 변수라는 것이 등록되는데 자바스크립트 동작을 이해하기 위해서는 이 변수에 대해서도 조금 더 알아볼 필요가 있겠다.</p>
<h3 id="var-let-const-그리고-스코프" style="position:relative;">var, let, const 그리고 스코프<a href="#var-let-const-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%8A%A4%EC%BD%94%ED%94%84" aria-label="var let const 그리고 스코프 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><img src="https://user-images.githubusercontent.com/24996316/203207706-c3a6854c-026e-4b83-a9a5-2e32f12e45ea.png" alt="Frame 40"></p>
<p>자바스크립트 안에서 변수 선언은 세 키워드를 통해 가능하다.<br>
var, let, const</p>
<p>ECMAScript6가 나오기 전까지는 var 키워드를 이용해서만 변수 할당이 가능했다. 다만 var 키워드가 가진 문제가 몇 가지 있는데 이를 보완하기 위해 let, const가 나왔다. 그리고 이 둘의 뚜렷한 차이점에 바로 스코프(어디까지 유효 범위를 가지는지)가 있다.</p>
<h4 id="var-키워드-특징" style="position:relative;">var 키워드 특징<a href="#var-%ED%82%A4%EC%9B%8C%EB%93%9C-%ED%8A%B9%EC%A7%95" aria-label="var 키워드 특징 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<ul>
<li>함수 레벨의 범위를 갖는다 (= 함수 이외에 선언된 변수들은 전역 변수로 남발될 가능성이 높다)</li>
<li>키워드 생략 허용이 된다 (= 암묵적인 전역 변수 생성 가능성이 높다)</li>
<li>변중복 선언 허용 (= 개발자가 의도하지 않은 변수 변경 가능성이 높다)</li>
<li>변수 호이스팅 (= 변수 선언 이전에 값을 참조해 버려 의도하지 않은 값이 할당되는 경우가 생긴다)</li>
</ul>
<table>
<thead>
<tr>
<th align="center">var</th>
<th align="center">let</th>
<th align="center">const</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">함수 범위</td>
<td align="center">블록 범위</td>
<td align="center">블록 범위</td>
</tr>
</tbody>
</table>
<p>프론트 개발 신입 면접을 보던 당시 손코딩 면접에서 등장했던 for문 코드가 있는데 이 예시가 var, let 스코프 차이를 설명하기 적절한 것 같다.</p>
<p>아래 코드에서 ‘전역 변수’ 값이 콘솔창에 찍힐까?<br>
arrayObjs 배열에는 개발자가 의도한대로 console.log(0), console.log(1), console.log(2)를 찍는 함수들이 배열에 들어갈까?</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> arrayObjs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'전역 변수 i'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'루프 함수 변수 i'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    arrayObjs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><img src="https://user-images.githubusercontent.com/24996316/203221963-d1350113-d018-41c5-9073-071eb401c4b9.png" alt="image"></p>
<p>결과창을 보면 위와 같이 for문에 선언된 i 변수가 전역 변수 i로 3이 할당되어 찍힌다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203222319-8e5d92b2-079b-4cd4-8079-67085500eeaf.png" alt="image"></p>
<p>arrayObjs에 push된 함수들을 실행시켜보면 for문의 i 값에 따라 순차적으로 함수가 저장된 게 아닌 i 값이 for문 전체를 돌고 난 후의 값인 console.log(3)을 담고 있는 함수들이 for문 개수만큼 들어가있다.<br>
의도치 않은 이런 결과가 나온 이유는 var 키워드가 함수 스코프를 갖고 있기 때문이다. for문{}은 함수가 아닌 블록이라서 for문 내부에 생성된 함수에서 i를 접근하려고 했을 때 바로 위에 있는 for문{} i 변수를 참조할 수 없어 for문이 모두 돌고난 후 전역으로 자동 저장된 i(3)를 참조하게 되는 것이다.<br>
즉, 3번 코드줄에서 콘솔로 i값에 접근했을 때 에러가 나지 않은 이유는 for문의 i 변수가 호이스팅되었기 때문이다.</p>
<p>똑같은 코드를 let으로 바꿨을 때의 결과와 비교하면</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> arrayObjs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'전역 변수 i'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'루프 함수 변수 i'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    arrayObjs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><img src="https://user-images.githubusercontent.com/24996316/203224004-f8a209a9-b27f-4d8b-9c51-bef639b4f75f.png" alt="image"></p>
<p>전역 변수에 i 콘솔 로그를 찍은 부분에 에러가 뜬다. var 키워드로 for문을 작성했던 이전 코드와 달리 let 키워드를 사용한 for문은 let이 블록 스코프를 갖기 때문에 for문 블록에서 선언한 i를 블록의 바깥에서 접근하려 했기 때문에 참조 에러가 뜨는 것이다. 해당 콘솔 부분을 지우고 함수들을 push한 arrayObjs 배열을 조회해 보면 아래와 같은 결과가 나온다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203224733-e8767947-8927-49e3-aba3-3a07e474fd75.png" alt="image"></p>
<p>let은 블록 범위에서 유효한 값을 유지하기 때문에 for문이 순차로 돌 때 i 값을 유지한 채로 arrayObjs 배열에 함수를 push한 것이다.<br>
const는 let과 비교했을 때 한 번 const 변수로 선언하면 이후에 재할당이 불가능하다는 점 이외에는 모두 같다. 즉, const는 불변의 상수 값을 변수로 할당시킬 때 사용하는 키워드라 보면 된다.</p>
<h4 id="스코프-체인" style="position:relative;">스코프 체인<a href="#%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8" aria-label="스코프 체인 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>자바스크립트 코드에 익숙한 사람들이 아래 코드로 결과값을 유추해 보라고 한다면 익숙하게 5라는 답을 줄 것이다. 실제로는 어떤 흐름을 통해서 getDiscountedPrice 함수가 바깥에 선언된 discount에 접근할 수 있었던 걸까?</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> discount <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getDiscountedPrice</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> price <span class="token operator">*</span> discount<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> totalPrice <span class="token operator">=</span> <span class="token function">getDiscountedPrice</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>getDiscountedPrice 함수에서 연산하기 위해 필요한 discount 변수는 함수 바깥에 선언되어있고 let은 블록 스코프를 갖고 있어 제약없이 함수 스코프에 필요한 참조값이 없으면 그 위 단계에서 참조값을 찾아 연산한 것이다. 이 현상이 바로 스코프 체인이다.<br>
만일 아래처럼 discount가 선언되었다면 참조 에러가 떴을 것이다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token keyword">const</span> discount <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getDiscountedPrice</span><span class="token punctuation">(</span><span class="token parameter">price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> price <span class="token operator">*</span> discount<span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> totalPrice <span class="token operator">=</span> <span class="token function">getDiscountedPrice</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3 id="호이스팅" style="position:relative;">호이스팅<a href="#%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85" aria-label="호이스팅 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><img src="https://user-images.githubusercontent.com/24996316/203231155-60bb345b-8e1a-457e-9f29-0223ee2c9aa5.png" alt="Frame 41"></p>
<p>호이스팅이란 실행문이 선언문보다 앞에 있음에도 마치 선언문이 실행문보다 선두에 위치된 것처럼 동작하는 걸 말한다.<br>
또한 헷갈리기 쉬운 개념인데 호이스팅은 전역 변수 빌런 var 키워드에서만 일어나는 게 아닌 let, const, function class 모든 선언에서 호이스팅이 일어난다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> test1<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Uncaught ReferenceError</span>
<span class="token keyword">let</span> test2<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>위와 같이 var 키워드와 달리 let 키워드는 선언 이전의 변수를 실행시켰을 때 참조 에러를 띄운다. 하지만 참조 에러를 띄웠다는 게 호이스팅이 일어나지 않았다는 의미는 아니다. 이를 설명하기 위해서는 자바스크립트가 변수를 생성하는 단계를 알아야한다. 변수는 총 세 단계에 거쳐 생성된다.</p>
<blockquote>
<ol>
<li>선언 단계<br>
변수를 실행 컨텍스트의 변수 객체에 등록한다. 이 변수 객체는 스코프가 참조하는 대상이 된다.</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>초기화 단계<br>
변수 객체에 등록된 변수를 위한 공간을 메모리에 확보한다. 이 단계에서 변수는 undefined로 초기화된다.</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>할당 단계<br>
undefined로 초기화된 변수에 실제 값을 할당한다.</li>
</ol>
</blockquote>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 변수 등록도 하고 undefined 할당되어 있음</span>
<span class="token keyword">var</span> test1<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>var 키워드는 선언과 동시에 해당 값을 초기화시킨다. 스코프의 선두에 변수를 등록하는 동시에 undefined 라는 초기값이 할당되어있기 때문에 변수 선언문 이전에 변수를 에러없이 참조할 수 있었던 것이다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 변수 등록은 했는데 초기화가 안 되어있다 -> 일시적 사각지대에 들어감</span>
<span class="token keyword">let</span> test1<span class="token punctuation">;</span> <span class="token comment">// 변수 선언문 코드까지 와야 undefined 할당시킴</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>let 키워드는 선언과 초기화 단계가 분리되어 진행된다. 스코프의 선두에 변수를 등록은 시키나(1. 선언 단계는 완료했으나) 변수 선언문까지 와야 초기화 값을 할당(2. 초기화 단계)시킨다. 따라서 값이 없는 변수를 콘솔로 찍으려고 하니 참조 에러가 떴던 것이다. 1. 선언 단계(스코프 시작 지점부터)부터 2. 초기화 단계 직전까지의 구간을 일시적 사각지대(Temporal Dead Zone = TDZ)라 부른다.</p>
<h3 id="클로저" style="position:relative;">클로저<a href="#%ED%81%B4%EB%A1%9C%EC%A0%80" aria-label="클로저 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><img src="https://user-images.githubusercontent.com/24996316/203251617-87d363c9-01ec-4a79-b8ce-223fc5e40c07.png" alt="Frame 41"></p>
<blockquote>
<p>💡 함수가 함수를 반환할때 반환되는 함수는 자신을 둘러싼 환경 정보를 가지고 반환된다</p>
</blockquote>
<p>스코프체인이 일어나기 전에 클로저가 먼저 일어나는데 이에 대한 예시를 코드를 통해 이해해 보자.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">function</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       number <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> increase<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newCalc <span class="token operator">=</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>해당 코드가 실행되면 전역 메모리에 cal 함수 정보와 newCalc 변수가 등록된다.<br>
이후 calc() 함수가 호출되면서 콜스택에 calc 함수 실행 컨텍스트가 쌓이고 콜스택이 해당 컨텍스트의 순서가 왔을 때 calc 함수 내부 코드를 실행시킨다.<br>
calc 함수 실행 컨텍스트가 생성되고 지역 메모리 공간이 생성되는데 이 메모리 공간에 number와 increase 함수 정보가 등록된다.</p>
<hr>
<p>number: 0<br>
increase : 함수</p>
<hr>
<p>calc 함수가 increase 함수를 리턴하면서 increase 함수 정보가 전역 메모리의 newCalc 변수에 할당되고, calc 함수 실행 컨텍스트는 종료된다.<br>
전역 메모리의 newCalc() 호출로 newCalc 함수 실행 컨텍스트가 생성되고 해당 컨텍스트의 지역 메모리도 만들어진다. 여기까지는 앞서 말한 컨텍스트와 지역 메모리의 동작 방식들과 다를 게 없다. 그런데 newCalc에 연결된 increase 함수 내부를 실행하려고 보니 실행에 필요한 number 변수의 참조값이 없다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 👈 number 어디서 가져오지</span>
   number <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>calc 함수의 지역 메모리에 등록되 number 변수는 calc 실행 함수 컨텍스트가 종료되면서 이미 사라진 상태이고 전역 메모리에도 newCalc 변수와 calc 함수 정보 밖에 없어서 전역으로 스코프체인을 해도 number 변수 참조값을 찾을 수가 없는 것 같다. 그런데 해당 코드를 실행시켜보면 정상 동작하는데 number는 어디서 튀어나온 걸까?</p>
<hr>
<p>newCalc: 변수<br>
calc : 함수 (increase 정보 할당)</p>
<hr>
<p>여기서 클로저라는 개념이 등장한다.<br>
increase 함수가 calc에서 리턴될 때 increase 함수 주변의 정보도 같이 반환된 것이다. 그리고 그 안에 number가 있고 이 number 정보도 newCalc 변수에 함수 정보로 연결되었던 것이다.<br>
이걸 바로 number 변수를 클로저로 찾았다고 표현한다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
여기서부터 👉 <span class="token comment">//</span>
   <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">function</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       number <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> increase<span class="token punctuation">;</span> <span class="token comment">// 👈 여기까지 정보를 함께 가져온다</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newCalc <span class="token operator">=</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>자바스크립트 엔진은 지역 메모리에서 값을 찾지 못한 경우 상위 컨텍스트로 스코프 체이닝을 하기 전에 클로저로 먼저 정보를 찾는다. newCalc 함수를 호출해 실행하면 number 0 값을 1로 연산해주고 실행 컨텍스트가 종료되면서 콜스택에서도 삭제된다.<br>
newCalc 함수를 두 번째로 호출했을 때도 앞선 동작과 마찬가지로 클로저로 increase 함수가 등록될 때 같이 추가된 환경 정보를 뒤적여 number 값을 찾아내는데 이때의 number 값은 1이므로 최종적으로 2가 반환되어 해당 컨텍스트까지 최종 종료되어 콜스택에서도 삭제된다.</p>
<h3 id="렉시컬-환경" style="position:relative;">렉시컬 환경<a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD" aria-label="렉시컬 환경 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><img src="https://user-images.githubusercontent.com/24996316/203262429-4124cfbc-b921-4fdb-8473-0af4214ce19c.png" alt="Frame 41 (1)"></p>
<p>클로저가 주변 환경 정보를 기억해서 가져오는 부분에 대해 조금 자세히 이해하려면 렉시컬 환경에 대한 이해가 선행되어야한다.<br>
렉시컬 환경이란 변수와 변수에 할당된 값, 그리고 상위 스코프에 대한 참조를 기록하는 컨텍스트이다.</p>
<p>자바스크립트 동작의 모든 기반에 컨텍스트가 있다는 걸 기억한다면 렉시컬 환경이 바로 자바스크립트 실행 시 근간이 되는 공간이라는 해석이 된다.<br>
실행 중인 함수, 코드 블럭, 스크립트 전체는 렉시컬 환경이라 불리는 내부 숨김 연관 객체(internal hidden associated object)를 갖는다.<br>
렉시컬 환경 객체는 두 부분으로 구성된다.</p>
<hr>
<p>환경 레코드 : 모든 지역 변수 정보를 저장하는 객체<br>
외부 렉시컬 환경 : 외부 코드와 연관된 환경 정보</p>
<hr>
<h4 id="렉시컬-환경-변수" style="position:relative;">렉시컬 환경-변수<a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98" aria-label="렉시컬 환경 변수 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>우리가 자바스크립트 파일에서 아래와 같이 변수를 만든다는 것은 결국 렉시컬 환경 객체에 환경 레코드의 프로퍼티를 만든다는 이야기와 동일하다.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token string">"sy"</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p><img src="https://user-images.githubusercontent.com/24996316/203271747-eb4c4301-9e88-4b1a-905e-6ad1ada9210d.png" alt="Frame 51 (1)"></p>
<p>위 코드는 전역에 등록된 렉시컬 환경 레코드 프로퍼티이므로 외부 렉시컬 환경은 참조하지 않기 때문에 null을 가리킬 것이다.</p>
<h4 id="렉시컬-환경-함수" style="position:relative;">렉시컬 환경-함수<a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%ED%95%A8%EC%88%98" aria-label="렉시컬 환경 함수 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token string">"sy"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">printName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>me<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 은 내 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">printName</span><span class="token punctuation">(</span><span class="token string">"이름"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sy는 내 이름</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>렉시컬 환경에서 함수를 실행하면 새로운 렉시컬 환경이 자동으로 만들어진다. 새로 만들어진 렉시컬 환경에는 name:“이름” 이라는 변수가 저장될 것이다.</p>
<p>만들어진 printName 렉시컬 환경이 참조하는 외부 렉시컬 환경에는 me:“sy”, printName: 함수 정보라는 변수 정보가 등록되어있을 것이다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203271640-e76b8201-5930-48f7-813f-f84f3907be80.png" alt="Frame 54"></p>
<h4 id="렉시컬-환경-함수를-반환하는-함수" style="position:relative;">렉시컬 환경-함수를 반환하는 함수<a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%ED%95%A8%EC%88%98%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%98%EB%8A%94-%ED%95%A8%EC%88%98" aria-label="렉시컬 환경 함수를 반환하는 함수 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>아까의 클로저 예시 코드를 다시 가져와 보자.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber 0" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">increase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        number <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> increase<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newCalc <span class="token operator">=</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newCalc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>newCalc() 함수를 호출할 때마다 새로운 렉시컬 환경 객체가 만들어질 것이고 여기에는 newCalc 함수를 실행하는데 필요한 변수 정보들이 담겨있을 것이다. 위에서 함수를 생성할 때와 마찬가지로 newCalc 렉시컬 환경의 외부 렉시컬 환경은 그 이전에 실행된 함수의 렉시컬 환경이 될 것이고 이 연쇄는 전역의 null까지 이어져야 끝이 난다.<br>
그런데 클로저 예시 코드는 일반 함수와 다르게 함수를 리턴하는 점에서 기억해야될 부분이 있다.</p>
<p><img src="https://user-images.githubusercontent.com/24996316/203272569-2da69ec3-7c50-4719-89d8-24af7414a64d.png" alt="Frame 54 (1)"></p>
<p>자바스크립트에서 <strong>모든 함수는 함수가 생성된 곳의 렉시컬 환경을 기억한다</strong>는 점이다. 함수는 <code class="language-text">[[Environment]]</code>이라 불리는 숨김 프로퍼티를 갖는데 여기에 함수가 만들어진 곳의 렉시컬 환경에 대한 참조 정보가 저장된다.<br>
즉, 클로저는 렉시컬 스코프로 정보를 가져온다고 말할 수 있는 것이다.</p>
<blockquote>
<p>렉시컬 스코프<br>
함수의 호출에서 정의된 위치가 아닌 다른 공간에서 값이 결정되는 스코프</p>
</blockquote>
<h4 id="렉시컬-환경과-실행-컨텍스트의-관계" style="position:relative;">렉시컬 환경과 실행 컨텍스트의 관계<a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD%EA%B3%BC-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%EA%B4%80%EA%B3%84" aria-label="렉시컬 환경과 실행 컨텍스트의 관계 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h4>
<p>실행 컨텍스트와 렉시컬 환경의 구성이 이름만 다를 뿐 동작하는 모양이 비슷하게 보여서 같은 건가 헷갈렸는데 이 둘은 다른 개념이다.<br>
js 파일이 실행될 때 생성되는 렉시컬 환경은 무수히 많지만 (각 함수마다 누가 어떤 외부를 참조하는지 해당 함수의 변수들에는 어떤 정보가 있는지 등) 코드 라인마다 실행되는 함수는 특정되는데 이때 이 특정한 함수의 렉시컬 환경을 실행시키는 것이 실행 컨텍스트이다. (= this 바인딩이 여기서 나온다)</p>
<h3 id="참고한-글" style="position:relative;">참고한 글<a href="#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EA%B8%80" aria-label="참고한 글 permalink" class="custom-class after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p><a href="https://forward.nhn.com/2021/sessions/17">nhn 2021 포럼</a><br>
<a href="https://poiemaweb.com/es6-block-scope">es6-block-scope</a><br>
<a href="https://stackoverflow.com/questions/31219420/are-variables-declared-with-let-or-const-hoisted">are-variables-declared-with-let-or-const-hoisted?</a><br>
<a href="https://ko.javascript.info/closure">변수의 유효범위와 클로저</a></p></section></article><div class="blog-table"><div class="table-of-contents"><ul>
<li>
<p><a href="#%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8">실행 컨텍스트</a></p>
</li>
<li>
<p><a href="#%EC%BD%9C%EC%8A%A4%ED%83%9D">콜스택</a></p>
</li>
<li>
<p><a href="#var-let-const-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%8A%A4%EC%BD%94%ED%94%84">var, let, const 그리고 스코프</a></p>
<ul>
<li><a href="#var-%ED%82%A4%EC%9B%8C%EB%93%9C-%ED%8A%B9%EC%A7%95">var 키워드 특징</a></li>
<li><a href="#%EC%8A%A4%EC%BD%94%ED%94%84-%EC%B2%B4%EC%9D%B8">스코프 체인</a></li>
</ul>
</li>
<li>
<p><a href="#%ED%98%B8%EC%9D%B4%EC%8A%A4%ED%8C%85">호이스팅</a></p>
</li>
<li>
<p><a href="#%ED%81%B4%EB%A1%9C%EC%A0%80">클로저</a></p>
</li>
<li>
<p><a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD">렉시컬 환경</a></p>
<ul>
<li><a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%EB%B3%80%EC%88%98">렉시컬 환경-변수</a></li>
<li><a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%ED%95%A8%EC%88%98">렉시컬 환경-함수</a></li>
<li><a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD-%ED%95%A8%EC%88%98%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%98%EB%8A%94-%ED%95%A8%EC%88%98">렉시컬 환경-함수를 반환하는 함수</a></li>
<li><a href="#%EB%A0%89%EC%8B%9C%EC%BB%AC-%ED%99%98%EA%B2%BD%EA%B3%BC-%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98-%EA%B4%80%EA%B3%84">렉시컬 환경과 실행 컨텍스트의 관계</a></li>
</ul>
</li>
<li>
<p><a href="#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EA%B8%80">참고한 글</a></p>
</li>
</ul></div></div></div><hr/><div id="comment"></div></main><footer>© 2021, COPYRIGHT ALL RIGHT<a href="https://www.gatsbyjs.com"></a></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/javascript/how_it_works2/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-b227d9031ab4094e5021.js"],"app":["/app-5b3bcece027326f3b5b1.js"],"component---src-pages-404-js":["/component---src-pages-404-js-1703a7c4f0bb80869505.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b58b9f798f7a06bf51c4.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-94b6e394b03fc5771de5.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-ae5cdc91524a5abefc8b.js"]};/*]]>*/</script><script src="/todayILearned/polyfill-b227d9031ab4094e5021.js" nomodule=""></script><script src="/todayILearned/component---src-templates-blog-post-js-ae5cdc91524a5abefc8b.js" async=""></script><script src="/todayILearned/app-5b3bcece027326f3b5b1.js" async=""></script><script src="/todayILearned/framework-e413e527015be9a1bdfd.js" async=""></script><script src="/todayILearned/webpack-runtime-aee77c2175a6eac07148.js" async=""></script></body></html>